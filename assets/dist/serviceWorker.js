let swRegistration,isSubscribed=!1;function initializeUI(){swRegistration.pushManager.getSubscription().then(function(e){(isSubscribed=!(null===e))?console.log("User IS subscribed."):(console.log("User is NOT subscribed."),subscribeUser())})}function subscribeUser(){swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BJ_308ngfLy-m8CvpI2y1gCO942m1nFr28I_NUazNU47eTy-nu69N3sIch8V-4DyM230gjMZ8H2qodJ8PA1EhMU"}).then(function(e){console.log("User is subscribed."),updateSubscriptionOnServer(e),isSubscribed=!0}).catch(function(e){console.log("Failed to subscribe the user: ",e)})}function updateSubscriptionOnServer(e){const s=document.querySelector(".js-subscription-json"),i=document.querySelector(".js-subscription-details");e?(s.textContent=JSON.stringify(e),i.classList.remove("is-invisible")):i.classList.add("is-invisible")}"serviceWorker"in navigator&&(navigator.serviceWorker.controller?console.log("[PWA Builder] active service worker found, no need to register"):navigator.serviceWorker.register("pwabuilder-sw.js",{scope:"./"}).then(function(e){console.log("[PWA Builder] Service worker has been registered for scope: "+e.scope),swRegistration=e,initializeUI()}));